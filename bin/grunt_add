#!/bin/bash
source $HOME/gruntvars_dir.sh
source $HOME/gruntvars_name.sh
source $HOME/gruntvars_vars.sh

echo
echo -e "\e[1m-----------------  Step 1/3  -----------------\e[0m"
echo
sleep $sleepTime
read -r -p "Input Alias: " alias

echo
echo -e "\e[1mChecking alias...\e[0m"

case $alias in
	*\ * )
		echo -e "\e[1mERROR: Alias must not have spaces; plain letters/numbers only \e[0m"
		exit
		;;
	*)
		;;
esac


echo -e "\e[1mNo spaces found [1/3] \e[0m"
sleep $sleepTime

alpha='[a-zA-Z0-9]'
v='~`!@#$%^&*()_-+=:;{[}]|\/<>,."'

if grep -q '^[-0-9a-zA-Z]*$' <<< $alias ;
	then 
		echo -e "\e[1mNo special characters found [2/3] \e[0m"	
	else
		echo -e "\e[1mERROR: Alias must not have special characters; plain letters/numbers only \e[0m"
		exit;
fi

sleep $sleepTime

gruntMatch=0
export gruntMatch
for line in $(cat $HOME/gruntvars_alias)
                do
			if [ $line == $alias ]
				then
					gruntMatch=1
					export gruntMatch
					
					echo -e "\e[1mERROR: Alias already exists \e[0m(Use \e[1mgrunt_list\e[0m to see existing aliases)"
					exit
				fi
                done

echo -e "\e[1mAlias is unique [3/3] \e[0m"
echo

sleep $sleepTime

bash grunt_add_properties "$projectAlias"
